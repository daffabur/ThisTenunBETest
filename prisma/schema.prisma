generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Province {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now())
  tenun     Tenun[]
}

model Tenun {
  id          Int      @id @default(autoincrement())
  jenisTenun  String
  imageUrl    String?
  description String
  createdAt   DateTime @default(now())
  province    Province @relation(fields: [provinceId], references: [id])
  provinceId  Int

  @@unique([provinceId, jenisTenun], map: "uniq_province_jenis")
  @@index([provinceId])
}

model OutfitInspo {
  id        Int       @id @default(autoincrement())
  slug      String    @unique      // dipakai untuk upsert
  title     String
  imageUrl  String
  credit    String?
  sourceUrl String?
  gender    Gender?
  tags      String[]  @default([])

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

enum Gender {
  MEN
  WOMEN
  UNISEX
}

model Article {
  id          Int       @id @default(autoincrement())
  slug        String    @unique        // ex: "sejarah-tenun-bali"
  title       String
  summary     String?                  // ringkasan singkat
  content     String?                  // isi artikel full (opsional)
  imageUrl    String?                  // cover (opsional) ex: /public/images/articles/xxx.jpg
  tags        String[]  @default([])   // Postgres text[]
  publishedAt DateTime?

  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([publishedAt])
}
